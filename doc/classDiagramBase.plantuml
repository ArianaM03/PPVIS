@startuml

class НачалоСессии <<main, injector>>{
    + {static} void main()
    + Банкомат создать()
}

НачалоСессии ..> Банкомат : <<create>>
НачалоСессии ..> Картридер : <<create>>
НачалоСессии ..> ХранилищеБанкнот : <<create>>
НачалоСессии ..> Банкнота : <<create>>
НачалоСессии ..> Модель : <<create>>
НачалоСессии ..> Контроллер : <<create>>
НачалоСессии ..> Окно : <<create>>
НачалоСессии ..> Пользователь: <<create>>
НачалоСессии ..> ПечатникЧеков: <<create>>
НачалоСессии ..> Карта: <<create>>

class Пользователь <<abstract>>{
    + String фио
    + String номерТелефона
    + void добавитьКарту(карта: Карта)
}

class Карта{
    + String номерКарты
    + String пинКод
    + String фиоВладельца
    + String названиеБанка
    + String свв
    + String срокДействия
    + boolean состояниеКарты 
}

Пользователь "1" o-- "n" Карта: +карты

class Банкомат{
    + String личныйНомер
    + String название банка
    + String адрес 

    + void начатьРаботу()
}

class Модель <<model>>{
    + void ввестиКарту(карта: Карта)
    + void ввестиПин(пин: String)
    + void снятиеНаличных()
    + void поплнениеКартыНаличкой()
    + void проверкаБаланса()
    + void выпискаОперацийНаТелефон(номер: String)
    + void переводСредств(номерКарты: string, сумма: double)
    + void ввестиСумму(сумма: double)
    + void проверкаБанкоматаНаНаличиеСредств(денежнаяЯчейка: ДенежнаяЯчейкаб сумма: double)
    + void проверкаСредствНаКарте(карта: Карта, сумма: double)
    + void печатьЧека()
}

Банкомат "1" *-- "1" Модель: +модель
Модель ..> Карта: <<use>>
Модель "1" --> "1" Пользователь: +пользователь

class Контроллер <<controller>>{
    + void ввестиКарту(карта: Карта)
    + void вернутьКарту(карта: Карта)
    + void ввестиПин(пин: String)
    + void проверитьПин()
    + void блокировкаКарты(карта: Карта)
    + void снятиеНаличных()
    + void поплнениеКартыНаличкой()
    + void проверкаБаланса()
    + void выпискаОперацийНаТелефон(номер: String)
    + void переводСредств(номерКарты: string, сумма: double)
    + void ввестиСумму(сумма: double)
    + void проверкаБанкоматаНаНаличиеСредств(хранилищеБанкнот: ХранилищеБанкнот, сумма: double)
    + void проверкаСредствНаКарте(карта: Карта, сумма: double)
}


Контроллер --> "1" Модель: +модель
Банкомат "1" *-- "1" Контроллер: +контроллер
Контроллер "1" --> "1" Пользователь: +пользователь

class Картридер{
    + void принятьКарту(карта: Карта)
    + void отдать карту()
}

class ПечатникЧеков{
    + void печатьЧека()
}

class ХранилищеБанкнот{
    + банкноты List<int>
    + void выдатьСумму(сумма: int)
}

class Банкнота{
    + int номинал
}

enum Валюта{
BYN
}

Модель "1" *-- "1" Картридер: +картридер
Модель "1" *-- "1" ХранилищеБанкнот: +хранилищеБанкнот
Модель "1" *-- "1" ПечатникЧеков: +печатник
ХранилищеБанкнот "1" --> "n" Банкнота: -банкнота
Банкнота "n" --> "1" Валюта: + валюта

class Окно <<UI>>{
    + void работаОкна(контроллер: Контроллер)
    + void информацияОбОкне(вид: ВидОкна)
    + ВидОкна получениеИнфы()
}

Банкомат "1" *-- "1" Окно: +кно

class Отображение{
    + void отобразить окно()
}

enum ВидОкна{
ВЫБОР_ОПЕРАЦИИ
СНЯТИЕ_НАЛИЧНЫХ
ПОПОЛНЕНИЕ_КАРТЫ_НАЛИЧКОЙ
ПРОВЕРКА_БАЛАНСА
ВЫПИСКА
ПЕРЕВОД_СРЕДСТВ
ВВОД_ПИНА
ВВОД_СУММЫ
ВЕРНО
ОШИБКА
БЛОКИРОВКА_КАРТЫ

}

Окно ..> ВидОкна: <<use>>
Окно "1" *-- "n" Отображение: -окно
Отображение "n" -->  "1" ВидОкна: +видОкна
Окно "1" --> "1" Отображение: +текущееОкно
Модель ..> ВидОкна: <<use>>

@enduml
